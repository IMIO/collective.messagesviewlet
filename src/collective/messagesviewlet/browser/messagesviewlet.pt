<div id="messagesviewlet"
     tal:define="messages view/getAllMessages"
     tal:condition= "messages"
     i18n:domain="collective.messagesviewlet">

	<script src="++resource++collective.messagesviewlet/js.cookie-2.0.3.min.js"></script>
	<script>
		$(document).ready(function(){
			$(".greencheck-button").click(function(){
				var m_uids = Cookies.get('messagesviewlet');
				var m_uid = $(this).parent().attr('id');
				if(typeof m_uids === "undefined") {m_uids = m_uid}
				else {m_uids += "|" + m_uid;}
				Cookies.set('messagesviewlet', m_uids, { expires: 365 });
				$(this).parent().hide();
				});
		})
	</script>

    <tal:message repeat="message messages">
        <dl tal:attributes="class python:'messagesviewlet-' + message.msg_type;
		                    id message/UID">
            <dt i18n:translate="" tal:content="python: message.msg_type"></dt>
            <dd>
                <tal tal:replace="structure python: message.text.output"></tal>
            </dd>
			<span class="greencheck-button" tal:condition="message/can_hide">
				<img src="++resource++collective.messagesviewlet/greencheck.jpg" 
                     i18n:attributes='alt green_check_alt;
                                      title green_check_title'
                />
			</span>
        </dl>
    </tal:message>

</div>
